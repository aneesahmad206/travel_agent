"""
This type stub file was generated by pyright.
"""

from abc import ABC
from dataclasses import dataclass
from datetime import datetime, timedelta
from typing import Callable, TYPE_CHECKING
from ibm_watsonx_ai import APIClient

if TYPE_CHECKING:
    ...
STATUS_FORCELIST = ...
class BaseAuth(ABC):
    """Base class for any authentication method used in the APIClient."""
    _token: str | None = ...
    def get_token(self) -> str:
        """Returns the token.

        :returns: token to be used with service
        :rtype: str
        """
        ...
    
    async def aget_token(self) -> str:
        """Returns the token.

        :returns: token to be used with service
        :rtype: str
        """
        ...
    


@dataclass
class TokenInfo:
    """Data class in which information about token and the token are returned to be put into auth method structures.
    `expiration_datetime` should be only set when token expiration information cannot be extracted from the token,
    and this is when token is not JWT token. Otherwise, `expiration_datetime` should be set to None.

    :param token: token to be used with service
    :type token: str

    :param expiration_datetime: datetime of token expiration, if the token is not JWT, otherwise should be set to None
    :type expiration_datetime: datetime or None, optional
    """
    token: str
    expiration_datetime: datetime | None = ...


class RefreshableTokenAuth(BaseAuth, ABC):
    """Abstract base class of all authentication methods which are using token generation and refresh.

    :param api_client: initialized APIClient object with set project or space ID
    :type api_client: APIClient

    :param on_token_creation: callback which allows to notify about token creation
    :type on_token_creation: function which takes no params and returns nothing

    :param on_token_refresh: callback which allows to notify about token refresh
    :type on_token_refresh: function which takes no params and returns nothing

    :param refreshing_timedelta: time to expiration below which the token will be refreshed before use
    :type refreshing_timedelta: timedelta, optional
    """
    _hardcoded_expiration_datetime: datetime | None = ...
    def __init__(self, api_client: APIClient, on_token_creation: Callable[[], None] | None, on_token_refresh: Callable[[], None] | None, refreshing_timedelta: timedelta | None = ...) -> None:
        ...
    
    def get_token(self) -> str:
        """Returns the token. If the token will be about to expire, it will be refreshed.

        :returns: token to be used with service
        :rtype: str
        """
        ...
    
    async def aget_token(self) -> str:
        """Returns the token asynchronously. If the token will be about to expire, it will be refreshed.

        :returns: token to be used with service
        :rtype: str
        """
        ...
    


class TokenAuth(BaseAuth):
    """Basic authentication method, the object is keeping existing token and return it when asked.
    Token cannot be refreshed.

    :param token: token to be used with service
    :type token: str

    :param on_token_set: callback which allows to notify about token set
    :type on_token_set: function which takes no params and returns nothing, optional
    """
    def __init__(self, token: str, on_token_set: Callable[[], None] | None = ...) -> None:
        ...
    
    def get_token(self) -> str:
        """Returns the token. The token will not be refreshed.

        :returns: token to be used with service
        :rtype: str
        """
        ...
    
    async def aget_token(self) -> str:
        """Returns the token. The token will not be refreshed.

        :returns: token to be used with service
        :rtype: str
        """
        ...
    
    def set_token(self, token: str) -> None:
        """Set new token.

        :param token: token to be used with service
        :type token: str
        """
        ...
    


class TokenRemovedDuringClientCopyPlaceholder(BaseAuth):
    """Placeholder which indicates that no auth is currently available until `APIClient.set_token(token)` is used."""
    def __init__(self) -> None:
        ...
    
    def get_token(self) -> str:
        """Raise an error when `get_token()` is called."""
        ...
    


def get_auth_method(api_client: APIClient, on_token_set: Callable[[], None] | None = ..., on_token_creation: Callable[[], None] | None = ..., on_token_refresh: Callable[[], None] | None = ...) -> BaseAuth:
    """
    Return authentication method using values from API client.

    :param api_client: APIClient object
    :type api_client: APIClient

    :param on_token_set: callback which allows to notify about token set
    :type on_token_set: function which takes no params and returns nothing, optional

    :param on_token_creation: callback which allows to notify about token creation
    :type on_token_creation: function which takes no params and returns nothing, optional

    :param on_token_refresh: callback which allows to notify about token refresh
    :type on_token_refresh: function which takes no params and returns nothing, optional

    :returns: authentication method object
    :rtype: BaseAuth
    """
    ...

