"""
This type stub file was generated by pyright.
"""

from typing import Dict, List, Optional, TYPE_CHECKING, Union
from pandas import DataFrame
from ibm_watsonx_ai.experiment.autoai.engines import ServiceEngine, WMLEngine
from ibm_watsonx_ai.experiment.autoai.optimizers import RAGOptimizer, RemoteAutoPipelines
from ibm_watsonx_ai.helpers import DataConnection
from .base_auto_pipelines_runs import BaseAutoPipelinesRuns

__all__ = ["AutoPipelinesRuns"]
if TYPE_CHECKING:
    ...
class AutoPipelinesRuns(BaseAutoPipelinesRuns):
    """AutoPipelinesRuns class is used to work with historical Optimizer runs.

    :param engine: Engine to handle Service operations
    :type engine:  ServiceEngine or WMLEngine (deprecated)

    :param filter: filter, user can choose which runs to fetch specifying AutoPipelines name
    :type filter: str, optional
    """
    def __init__(self, engine: Union[WMLEngine, ServiceEngine], filter: str = ...) -> None:
        ...
    
    def __call__(self, *, filter: str = ...) -> AutoPipelinesRuns:
        ...
    
    def list(self, get_all: bool = ...) -> DataFrame:
        """Lists historical runs/fits with status. If user has a lot of runs stored,
        it may take long time to fetch all the information with `get_all=True`.

        :param get_all:  if `True`, all runs will be listed,
        if `False`, up to 200 runs will be listed,
        defaults to `False`
        :type get_all: bool, optional

        :return: Pandas DataFrame with runs IDs and state
        :rtype: pandas.DataFrame
        """
        ...
    
    def get_params(self, run_id: str = ...) -> dict:
        """Get executed optimizers configs parameters based on the run_id.

        :param run_id: ID of the fit/run, if not specified, latest is taken
        :type run_id: str, optional

        :return: optimizer configuration parameters
        :rtype: dict

        **Example:**

        .. code-block:: python

            from ibm_watsonx_ai.experiment import AutoAI

            experiment = AutoAI(credentials, ...)

            experiment.runs.get_params(
                run_id="02bab973-ae83-4283-9d73-87b9fd462d35"
            )
            experiment.runs.get_params()

            # Result:
            # {
            #     'name': 'test name',
            #     'desc': 'test description',
            #     'prediction_type': 'classification',
            #     'prediction_column': 'y',
            #     'scoring': 'roc_auc',
            #     'holdout_size': 0.1,
            #     'max_num_daub_ensembles': 1
            # }
        """
        ...
    
    def get_run_details(self, run_id: str = ..., include_metrics: bool = ...) -> dict:
        """Get run details. If run_id is not supplied, last run will be taken.

        :param run_id: ID of the fit/run
        :type run_id: str, optional

        :param include_metrics: indicates to include metrics in the training details output
        :type include_metrics: bool, optional

        :return: run configuration parameters
        :rtype: dict

        **Example:**

        .. code-block:: python

            from ibm_watsonx_ai.experiment import AutoAI

            experiment = AutoAI(credentials, ...)

            experiment.runs.get_run_details(
                run_id="02bab973-ae83-4283-9d73-87b9fd462d35"
            )
            experiment.runs.get_run_details()
        """
        ...
    
    def get_optimizer(self, run_id: Optional[str] = ..., metadata: Dict[str, Union[List[DataConnection], DataConnection, str, int]] = ...) -> RemoteAutoPipelines:
        """Create instance of AutoPipelinesRuns with all computed pipelines computed by AutoAI.

        :param run_id: ID of the fit/run
        :type run_id: str, optional

        :param metadata: option to pass information about COS data reference
        :type metadata: dict, optional

        :return: optimizer object
        :rtype: AutoPipelinesRuns class instance

        **Example:**

        .. code-block:: python

            from ibm_watsonx_ai.experiment import AutoAI

            experiment = AutoAI(credentials, ...)

            historical_optimizer = experiment.runs.get_optimizer(
                run_id="02bab973-ae83-4283-9d73-87b9fd462d35"
            )
        """
        ...
    
    def get_rag_params(self, run_id: str | None = ...) -> dict:
        """Get executed optimizers configs parameters based on the run_id.

        :param run_id: ID of the run, if not specified, latest is taken
        :type run_id: str, optional

        :return: optimizer configuration parameters
        :rtype: dict

        **Example**

        .. code-block:: python

            from ibm_watsonx_ai.experiment import AutoAI

            experiment = AutoAI(credentials, ...)

            experiment.runs.get_rag_params(
                run_id="02bab973-ae83-4283-9d73-87b9fd462d35"
            )
            experiment.runs.get_rag_params()

            # Result:
            # {
            #     'name': 'AutoAI RAG optimizer',
            #     'description': 'Sample description',
            #     'chunking_methods': None,
            #     'embedding_models': None,
            #     'retrieval_methods': None,
            #     'foundation_models': None,
            #     'max_number_of_rag_patterns': 5,
            #     'optimization_metrics': ['answer_correctness']
            # }

        """
        ...
    
    def get_rag_optimizer(self, run_id: str) -> RAGOptimizer:
        """Create instance of RAGOptimizer based on rag optimizer run with specific run_id.

        :param run_id: ID of the run
        :type run_id: str

        :return: rag optimizer object
        :rtype: RAGOptimizer

        **Example**

        .. code-block:: python

            from ibm_watsonx_ai.experiment import AutoAI

            experiment = AutoAI(credentials, ...)

            historical_rag_optimizer = experiment.runs.get_rag_optimizer(
                run_id="02bab973-ae83-4283-9d73-87b9fd462d35"
            )

        """
        ...
    
    def get_data_connections(self, run_id: str) -> List[DataConnection]:
        """Create DataConnection objects for further user usage
            (eg. to handle data storage connection or to recreate autoai holdout split).

        :param run_id: ID of the historical fit/run
        :type run_id: str

        :return: list of DataConnections with populated optimizer parameters
        :rtype: list['DataConnection']

        **Example:**

        .. code-block:: python

            from ibm_watsonx_ai.experiment import AutoAI

            experiment = AutoAI(credentials, ...)

            data_connections = experiment.runs.get_data_connections(
                run_id="02bab973-ae83-4283-9d73-87b9fd462d35"
            )
        """
        ...
    


