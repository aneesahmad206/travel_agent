"""
This type stub file was generated by pyright.
"""

from pathlib import Path
from typing import List, TYPE_CHECKING, Tuple
from pandas import DataFrame
from ibm_watsonx_ai.helpers.connections import DataConnection
from .base_engine import BaseEngine
from sklearn.pipeline import Pipeline
from ibm_watsonx_ai.workspace import WorkSpace

if TYPE_CHECKING:
    ...
__all__ = ["ServiceEngine"]
class ServiceEngine(BaseEngine):
    """Engine provides unified API to work with AutoAI Pipelines trainings.

    :param workspace: WorkSpace object with api client and all needed parameters
    :type workspace: WorkSpace
    """
    def __init__(self, workspace: WorkSpace) -> None:
        ...
    
    def initiate_remote_resources(self, params: dict, **kwargs) -> None:
        """Initializes the AutoPipelines with supplied parameters.

        :param params: AutoAi experiment parameters
        :type params: dict
        """
        ...
    
    def get_params(self) -> dict:
        """Get configuration parameters of AutoPipelineOptimizer.

        :return: AutoPipelineOptimizer parameters
        :rtype: dict
        """
        ...
    
    def fit(self, training_data_reference: List[DataConnection], training_results_reference: DataConnection, background_mode: bool = ..., test_data_references: List[DataConnection] = ...) -> dict:
        """Run a training process of autoai on top of the training data referenced by training_data_reference.

        :param training_data_reference: data storage connection details to inform where training data is stored
        :type training_data_reference: list[DataConnection]

        :param training_results_reference: data storage connection details to store pipeline training results
        :type training_results_reference: DataConnection

        :param background_mode: indicator if fit() method will run in background (async) or (sync)
        :type background_mode: bool, optional

        :param test_data_references: data storage connection details to inform where test / holdout data is stored
        :type test_data_references: list[DataConnection], optional

        :return: run details
        :rtype: dict
        """
        ...
    
    def get_run_status(self) -> str:
        """Check status/state of initialized AutoPipelineOptimizer run if ran in background mode.

        :return: run status
        :rtype: str
        """
        ...
    
    def get_run_details(self, include_metrics: bool = ...) -> dict:
        """Get fit/run details.

        :param include_metrics: indicates to include metrics in the training details output
        :type include_metrics: bool, optional

        :return: AutoPipelineOptimizer fit/run details
        :rtype: dict
        """
        ...
    
    def cancel_run(self) -> None:
        """Cancels an AutoAI run."""
        ...
    
    def summary(self, scoring: str = ..., sort_by_holdout_score: bool = ...) -> DataFrame:
        """Prints AutoPipelineOptimizer Pipelines details (autoai trained pipelines).

        :param scoring: scoring metric which user wants to use to sort pipelines by,
            when not provided use optimized one
        :type scoring: string, optional

        :param sort_by_holdout_score: indicates if we want to sort pipelines by holdout metric or by training one,
            by default use holdout metric
        :type sort_by_holdout_score: bool, optional

        :return: DataFrame with computed pipelines and ML metrics
        :rtype: pandas.DataFrame
        """
        ...
    
    def get_pipeline_details(self, pipeline_name: str = ...) -> dict:
        """Fetch specific pipeline details, eg. steps etc.

        :param pipeline_name: pipeline name eg. Pipeline_1, if not specified, best pipeline parameters will be fetched
        :type pipeline_name: str, optional

        :return: pipeline parameters
        :rtype: dict
        """
        ...
    
    def get_pipeline(self, pipeline_name: str, local_path: str | Path = ..., persist: bool = ...) -> Tuple[Pipeline, bool]:
        """Download specified pipeline.

        :param pipeline_name: pipeline name, if you want to see the pipelines names, please use summary() method
        :type pipeline_name: str

        :param local_path: local filesystem path, if not specified, current directory is used
        :type local_path: str | Path, optional

        :param persist: indicates if selected pipeline should be stored locally
        :type persist: bool, optional

        :return: Scikit-Learn pipeline and lale check result
        :rtype: tuple[Pipeline, bool]
        """
        ...
    
    def get_pipeline_notebook(self, pipeline_name: str, local_path: str | Path = ..., filename: str = ...) -> str:
        """Download specified pipeline notebook.

        :param pipeline_name: pipeline name, if you want to see the pipelines names, please use summary() method
        :type pipeline_name: str

        :param local_path: working directory path
        :type local_path: str | Path, optional

        :param filename: filename under which the pipeline notebook will be saved
        :type filename: str, optional

        :return: path to saved pipeline notebook
        :rtype: str
        """
        ...
    
    def get_best_pipeline(self, local_path: str | Path = ..., persist: bool = ...) -> Tuple[Pipeline, bool]:
        """Download best pipeline.

        :param local_path: local filesystem path, if not specified, current directory is used
        :type local_path: str | Path, optional

        :param persist: indicates if selected pipeline should be stored locally
        :type persist: bool, optional

        :return: Scikit-Learn pipeline and lale check result
        :rtype: tuple[Pipeline, bool]
        """
        ...
    


